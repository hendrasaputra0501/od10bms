<odoo>
    <data>
        <record id="bms_purchase_request_form_inherited" model="ir.ui.view">
            <field name="name">bms.purchase.request.form.inherited</field>
            <field name="model">purchase.request</field>
            <field name="inherit_id" ref="c10i_purchase_request.view_purchase_request_form" />
            <field name="arch" type="xml">
                <xpath expr="//sheet/group/group[1]/field[@name='priority']" position="after">
                    <field name="department_id"/>
                    <field name="realisasi"/>
                </xpath>
                <xpath expr="//sheet/notebook/page[1]/field[@name='line_ids']/tree/field[@name='product_qty']" position="before">
                    <field name="qty_onhand" readonly="1"/>
                </xpath>
                <xpath expr="//sheet/notebook/page[1]/field[@name='line_ids']/tree/field[@name='note']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//header/button[@name='button_rejected']" position="replace">
                    <button name="button_rejected" states="to_approve,approved" string="Reject" type="object" groups="c10i_purchase_request.group_purchase_request_approval"/>
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="c10i_purchase_request.view_purchase_request_tree">
            <field name="name">purchase.request.tree</field>
            <field name="model">purchase.request</field>
            <field name="arch" type="xml">
                <tree colors="purple:state=='approved';green:state=='done';" decoration-info="state in ('draft','to_approve')" decoration-muted="state in ('rejected')" string="Purchase Request">
                    <field name="message_needaction" invisible="1"/>
                    <field name="name"/>
                    <field name="priority"/>
                    <field name="date"/>
                    <field name="requested_by"/>
                    <field name="approved_by"/>
                    <field name="realisasi"/>
                    <field name="picking_type_id"/>
                    <field name="state"/>
                    <field name="company_id" invisible="1"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="c10i_purchase_request.purchase_request_form_action">
            <field name="name">Permintaan Barang dan Jasa</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">purchase.request</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'readonly_by_pass': True}</field>
            <field name="search_view_id" ref="c10i_purchase_request.view_purchase_request_search"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Klik untuk mulai membuat permintaan barang.
                </p>
            </field>
        </record>

        <record id="c10i_purchase_request.view_purchase_request_search" model="ir.ui.view">
            <field name="name">purchase.request.list.select</field>
            <field name="model">purchase.request</field>
            <field name="arch" type="xml">
                <search string="Search Purchase Request">
                    <field name="name" string="Purchase Request"/>
                    <separator/>
                    <field name="state"/>
                    <field name="picking_type_id" />
                    <filter name="unassigned" string="Unassigned" domain="[('approved_by','=', False)]" help="Unassigned Request"/>
                    <filter name="state_draft" string="Draft" domain="[('state','=','draft')]" help="Request is to be approved"/>
                    <filter name="state_to_approve" string="To Approve" domain="[('state','=','to_approve')]" help="Request is to be approved"/>
                    <filter name="state_approved" string="Approved" domain="[('state','=','approved')]" help="Request is approved"/>
                    <filter name="state_rejected" string="Rejected" domain="[('state','=','rejected')]" help="Request is rejected"/>
                    <filter name="state_done" string="Done" domain="[('state','=','done')]" help="Request is done"/>
                    <filter string="Unread Messages" name="message_needaction" domain="[('message_needaction','=',True)]"/>
                    <filter domain="[('approved_by','=', uid)]" help="Assigned to me"/>
                    <filter domain="[('requested_by','=', uid)]" help="My requests"/>
                    <field name="requested_by" />
                    <field name="approved_by" />
                    <field name="line_ids"/>
                    <group expand="0" string="Group By...">
                        <filter string="Requested by" icon="terp-personal" domain="[]" context="{'group_by':'requested_by'}"/>
                        <filter string="Assigned to" icon="terp-personal" domain="[]" context="{'group_by':'approved_by'}"/>
                        <filter string="Source" icon="terp-gtk-jump-to-rtl" domain="[]" context="{'group_by':'origin'}"/>
                        <filter string="Start Date" icon="terp-go-month" domain="[]" context="{'group_by':'date'}"/>
                    </group>
                </search>
            </field>
        </record>

        <menuitem id="c10i_purchase_request.menu_purchase_request" name="Permintaan Barang dan Jasa" parent="purchase.menu_purchase_root" sequence="0"/>
        <menuitem id="c10i_purchase_request.menu_purchase_request_pro_mgt" name="Permintaan Barang dan Jasa" parent="c10i_purchase_request.menu_purchase_request" action="c10i_purchase_request.purchase_request_form_action" sequence="10"/>
    </data>
</odoo>